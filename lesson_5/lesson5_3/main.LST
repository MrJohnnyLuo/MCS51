C51 COMPILER V9.02   MAIN                                                                  03/10/2020 23:51:53 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Program Files (x86)\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg52.h>
   2          
   3          sbit ADDR0 = P1^0;
   4          sbit ADDR1 = P1^1;
   5          sbit ADDR2 = P1^2;
   6          sbit ADDR3 = P1^3;
   7          sbit ENLED = P1^4;
   8          
   9          //用数组来存储数码管的真值表，数组将在下一章详细介绍
  10          unsigned char code LedChar[] = {
  11                  0xC0, 0xF9, 0xA4, 0xB0, 0x99, 0x92, 0x82, 0xF8,
  12                  0x80, 0x90, 0x88, 0x83, 0xC6, 0xA1, 0x86, 0x8E
  13          };
  14          
  15          void main()
  16          {
  17   1              unsigned char cnt = 0;  //记录T0中断次数
  18   1              unsigned char sec = 0;  //记录经过的秒数
  19   1      
  20   1              ENLED = 0;              //使能U3，选择数码管DS1
  21   1              ADDR3 = 1;
  22   1              ADDR2 = 0;
  23   1              ADDR1 = 0;
  24   1              ADDR0 = 0;
  25   1      
  26   1              TMOD = 0x01;    //设置T0为模式1
  27   1              TH0 = 0xB8;             //为T0赋初值0xB800
  28   1              TL0 = 0x00;
  29   1              TR0 = 1;                //启动T0
  30   1      
  31   1              while(1)
  32   1              {
  33   2                      if( TF0 == 1 )                          //判断T0是否溢出
  34   2                      {
  35   3                              TF0 = 0;                                //T0溢出后，清零中断标志
  36   3                              TH0 = 0xB8;                             //并重新赋初值
  37   3                              TL0 = 0x00;
  38   3                              cnt++;                                  //计数值自加1
  39   3                              if( cnt >= 50 )                 //判断T0溢出是否达到50次
  40   3                              {
  41   4                                      cnt = 0;                        //达到50次后计数值清零
  42   4                                      P0 = LedChar[sec];      //当前秒数对应的真值表中的值送到P0口
  43   4                                      sec++;                          //秒数记录自加1
  44   4                                      if( sec >= 16 )         //当秒数超过0x0F(15)后，重新从0开始
  45   4                                      {
  46   5                                              sec = 0;
  47   5                                      }
  48   4                              }
  49   3                      }
  50   2              }
  51   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     60    ----
C51 COMPILER V9.02   MAIN                                                                  03/10/2020 23:51:53 PAGE 2   

   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
